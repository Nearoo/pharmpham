(this["webpackJsonppamphlet-hoster"]=this["webpackJsonppamphlet-hoster"]||[]).push([[0],{181:function(e,t,n){},182:function(e,t,n){},263:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(35),i=n.n(r),s=(n(181),n(182),n(277)),o=n(41),d=n(276),l=n(134),u=n(6),j=n(26),b=n(27),O=n(156),h=n(51),x=n(174),v=n(99),p=n.n(v),f=n(10),m={apiKey:"AIzaSyDMdfO60OMPkrgWehDESBiGCeQUUO8kbz4",authDomain:"pharmpham-ca9c2.firebaseapp.com",databaseURL:"https://pharmpham-ca9c2-default-rtdb.europe-west1.firebasedatabase.app",projectId:"pharmpham-ca9c2",storageBucket:"pharmpham-ca9c2.appspot.com",messagingSenderId:"943213270509",appId:"1:943213270509:web:dd1d52fc7a840e127203e4",measurementId:"G-WSDG3CW4RN"},g=a.a.createContext({}),w=function(e){Object(j.a)(n,e);var t=Object(b.a)(n);function n(e){var c;e.props;return Object(u.a)(this,n),(c=t.call(this)).loadUserData=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"00192";Object(h.a)(Object(h.c)(c.db,"/users/".concat(e))).then((function(t){var n=t.val();c.setState({userData:n}),console.info("Loaded user ",e)})),c.setState({})},c.componentDidMount=function(){c.db=Object(h.b)(),c.stor=Object(x.a)(),fetch("/md_example.md").then((function(e){return e.text()})).then((function(e){return c.setState({defaultMarkdown:e})}))},c.setView=function(e){c.setState({view:e})},c.loadProductClass=function(e){var t=Object(h.c)(c.db,"/class/".concat(e));Object(h.a)(t).then((function(t){var n=t.val();n?(c.setState({productClass:n}),console.info("Loaded class with id",e)):console.error("Tried loading inexistant product clas with id ",e)}))},c.getProductClassOnce=function(e){var t=Object(h.c)(c.db,"/class/".concat(e));return Object(h.a)(t)},c.loadProductInstance=function(e){var t=Object(h.b)(),n=Object(h.c)(t,"/instance/".concat(e));Object(h.a)(n).then((function(t){var n=t.val();n?(c.setState({product:n}),c.loadProductClass(n.class_id),console.info("Loaded product with id",e)):console.error("Tried loading inexistant product with id",e)})),c.setState({expiry:"5/6/2027"}),console.log(c.state)},c.render=function(){return Object(f.jsx)(g.Provider,{value:c.state,children:c.props.children})},Object(O.a)(m),c.state={setView:c.setView,loadProductClass:c.loadProductClass,getProductClassOnce:c.getProductClassOnce,loadProductInstance:c.loadProductInstance,loadUserData:c.loadUserData,productIsPinned:c.productIsPinned,setProductIsPinned:c.setProductIsPinned},c}return n}(c.Component),P=(s.a.Text,function(){var e=Object(c.useState)(!0),t=Object(o.a)(e,2),n=(t[0],t[1]),a=Object(c.useState)("1"),r=Object(o.a)(a,2),i=(r[0],r[1]),s=Object(c.useContext)(g),u=[{viewTarget:"profile",title:"Profile"}],j=Object(c.useCallback)((function(e){var t=u[+e].viewTarget;s.setView(t),i(String(e)),n(!0),"profile"===t&&s.loadUserData()})),b=Object(c.useCallback)((function(){var e=new URL(window.location.href),t=e.searchParams.get("productId"),n=e.searchParams.get("classId");s.loadUserData(),t?(s.loadProductInstance(t),s.setView("product")):n?(s.loadProductClass(n),s.setView("product")):s.setView("profile")}));return Object(c.useEffect)((function(){b(),window.addEventListener("popstate",(function(){return b()}))}),[]),Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(d.a,{ghost:!1,extra:Object(f.jsx)(l.a,{onClick:function(){return j(0)},children:"Profile"}),title:"Drugbuddy"})})}),C=n(118),D=n(275),y=n(281),I=n(272),S=n(273),k=n(170),T=n(274),F=n(271),U=n(282),L=n(278),V=n(280),M=n(133),_=function(e){var t=e.elements,n=void 0===t?[]:t,c=e.ordered,a=n.map((function(e){return Object(f.jsx)("li",{children:e})}));return c?Object(f.jsx)("ol",{children:a}):Object(f.jsx)("ul",{children:a})},A=function(e){var t=e.elements,n=void 0===t?{}:t,c=e.highlightKeys,a=void 0===c?[]:c;return Object(f.jsx)(L.a,{children:Object.entries(n).map((function(e){return Object(f.jsx)(L.a.Panel,{style:{backgroundColor:a.includes(e[0])?"#ffa29c":""},header:e[0],children:a.includes(e[0])?Object(f.jsx)(V.a,{message:Object(f.jsx)(M.a,{children:e[1]}),type:"error"}):Object(f.jsx)(M.a,{children:e[1]})})}))})},E=function(e){var t=e.title,n=e.children,c=e.render,a=void 0===c?["lol"]:c;return p.a.isEmpty(a)?Object(f.jsx)(f.Fragment,{}):Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(F.a,{orientation:"left",children:t}),n]})},R=(s.a.Title,function(e){var t,n,a,r,i,s,o,d,l,u=e.data,j=e.user,b=Object(c.useContext)(g),O=Object.values(null!==(t=null===u||void 0===u||null===(n=u.manual)||void 0===n||null===(a=n.Description)||void 0===a?void 0:a.uses)&&void 0!==t?t:{}),h=null!==(r=null===u||void 0===u||null===(i=u.manual)||void 0===i?void 0:i.Administration)&&void 0!==r?r:{},x=null!==(s=null===u||void 0===u||null===(o=u.manual)||void 0===o?void 0:o.Precautions)&&void 0!==s?s:{},v=Object.values(null!==(d=null===j||void 0===j?void 0:j.precautions)&&void 0!==d?d:{});return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(E,{title:"Use Cases",render:O,children:Object(f.jsx)(_,{elements:O,ordered:!0})}),Object(f.jsx)(E,{title:"Administration",render:h,children:Object(f.jsx)(A,{elements:h})}),Object(f.jsx)(E,{title:"Precautions",render:x,children:Object(f.jsx)(A,{elements:x,highlightKeys:v})}),Object(f.jsx)(E,{title:"Further Infos",render:x,children:Object(f.jsx)(L.a,{defaultActiveKey:["1"],children:Object(f.jsx)(L.a.Panel,{header:"Leaflet",children:Object(f.jsx)(M.a,{children:null!==(l=String(b.defaultMarkdown))&&void 0!==l?l:"_loading..._"})},"1")})})]})}),G=s.a.Text,K=function(e){var t;Object(C.a)(e);var n=Object(c.useContext)(g);return Object(f.jsx)(D.b,{dataSource:null===n||void 0===n||null===(t=n.userData)||void 0===t?void 0:t.pinned,bordered:!0,renderItem:function(e){return Object(f.jsxs)(D.b.Item,{children:[Object(f.jsx)(D.b.Item.Meta,{title:e.title,description:e.description,onClick:function(){n.setView("product"),n.loadProductInstance(e.instance),window.history.pushState({},"Product","/?productId=".concat(e.instance))}}),Object(f.jsx)(G,{type:"warning",children:null===e||void 0===e?void 0:e.update_state})]})}})},z=function(e){var t,n=e.imagePath,a=void 0===n?"https://i.imgur.com/JiOArmf.png":n,r=null!==(t=Object(c.useContext)(g).userData)&&void 0!==t?t:{};return console.log(r),Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)(y.b,{direction:"vertical",style:{width:"100%"},children:[Object(f.jsxs)(I.a,{children:[Object(f.jsxs)(S.a,{children:[Object(f.jsx)(k.a,{size:64,icon:Object(f.jsx)(U.a,{}),src:a?Object(f.jsx)(T.a,{src:a}):null}),Object(f.jsx)("br",{})]}),Object(f.jsx)(S.a,{style:{paddingLeft:"20px"},children:Object(f.jsxs)(y.b,{direction:"vertical",children:[Object(f.jsxs)(G,{children:[r.firstname," ",r.lastname]}),Object(f.jsx)(G,{children:r.birthday})]})})]}),Object(f.jsx)(F.a,{orientation:"left"}),Object(f.jsx)(K,{})]})})},B=function(e){return Object(f.jsx)(f.Fragment,{})},J=n(279),W=function(e){var t,n,a,r,i=e.classData,d=e.instanceData,l=Object(c.useState)(!0),u=Object(o.a)(l,2),j=(u[0],u[1],null===i||void 0===i?void 0:i.title),b=null!==(t=null===i||void 0===i||null===(n=i.manual)||void 0===n||null===(a=n.Description)||void 0===a?void 0:a.Title)&&void 0!==t?t:"",O=null===i||void 0===i||null===(r=i.manual)||void 0===r?void 0:r.update_state,h=null===d||void 0===d?void 0:d.expiry_date;return Object(f.jsxs)(y.b,{direction:"vertical",style:{width:"100%"},children:[O?Object(f.jsx)(J.a.Ribbon,{text:O,color:"orange"}):Object(f.jsx)(f.Fragment,{}),Object(f.jsx)(J.a.Ribbon,{style:{marginTop:"25px"},text:"Safe until ".concat(h),color:"green"}),Object(f.jsx)(s.a.Title,{level:2,children:j}),Object(f.jsx)(s.a.Text,{children:b})]})},N=function(e){Object(C.a)(e);var t=Object(c.useContext)(g);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(W,{classData:t.productClass,user:t.userData,instanceData:t.product}),Object(f.jsx)(B,{data:t.product}),Object(f.jsx)(R,{data:t.productClass,user:t.userData})]})},Q=(s.a.Text,function(){var e,t=Object(c.useContext)(g);return{product:Object(f.jsx)(f.Fragment,{children:Object(f.jsx)(N,{})}),profile:Object(f.jsx)(z,{})}[null!==(e=t.view)&&void 0!==e?e:"profile"]}),X=function(){return Object(f.jsxs)("div",{style:{display:"flex",flexDirection:"column",height:"100%"},children:[Object(f.jsx)(P,{}),Object(f.jsx)("div",{style:{flexGrow:1,padding:"15px",overflowY:"scroll",overflowX:"hidden"},children:Object(f.jsx)(Q,{})})]})};var Y=function(){return Object(f.jsx)(w,{children:Object(f.jsx)(X,{})})};n(262);i.a.render(Object(f.jsx)(a.a.StrictMode,{children:Object(f.jsx)(Y,{})}),document.getElementById("root"))}},[[263,1,2]]]);
//# sourceMappingURL=main.d3ebab4a.chunk.js.map